class DynamicMesh{constructor(a){this.max_verts=a,this.geometry=new THREE.BufferGeometry;var b=new Float32Array(3*a),c=new Float32Array(3*a),d=new Uint32Array(6*a);this.geometry.addAttribute('position',new THREE.BufferAttribute(b,3)),this.geometry.addAttribute('color',new THREE.BufferAttribute(c,3)),this.geometry.setIndex(new THREE.BufferAttribute(d,1));var e=new THREE.MeshPhongMaterial({vertexColors:THREE.VertexColors});this.mesh=new THREE.Mesh(this.geometry,e),this.mesh.castShadow=!0,this.mesh.receiveShadow=!0}update(a,b,c){if(a.length>3*this.max_verts)throw'Position array too long',a.length;this.geometry.attributes.position.array.set(a),this.geometry.attributes.color.array.set(b),this.geometry.index.array.set(c),this.geometry.index.array.fill(0,c.length),this.geometry.setDrawRange(0,3*a.length),this.geometry.attributes.position.needsUpdate=!0,this.geometry.attributes.color.needsUpdate=!0,this.geometry.index.needsUpdate=!0,this.geometry.computeVertexNormals(),this.geometry.computeBoundingSphere()}}